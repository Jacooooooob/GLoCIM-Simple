# @package _global_

# specify here default configuration
# order of defaults determines the order in which configs override each other
defaults:
  - path: default
  - model: GLORY
  - logger: wandb
  - dataset: MINDsmall
  - _self_

seed: 42 # 3407 is all you need,great!try 42
num_epochs: 16
batch_size: 128  # dataloaders'batch_size = batch_size / gpu_num
npratio: 4
accumulation_steps: 1
# final total actual batch_size = batch_size * accumalation_steps
train_mode: true
val_mode: true

num_workers: 4        # Number = nGPU * 4
dropout_probability: 0.2

early_stop_patience: 3
enable_prefetch: true
enable_shuffle: false
log_steps: 1000
load_checkpoint: false
val_steps: 2000
val_start_step: 8000   # 从该步后才进行验证（与 small 一致；recompute 下影响较小）
# 验证新闻编码策略：recompute(每次重编码，保真) | cache(第一次计算后缓存复用)
val_embed_mode: recompute
# 验证采样比例：1.0 为全量，<1.0 可加速（近似指标）
val_sample_ratio: 1.0
# 验证阶段 AMP：为保证数值保真，默认关闭
val_amp: false
# 是否在验证阶段使用离线邻居向量注入（news_outputs_dict/trimmed_neighbors）
val_use_offline_neighbors: false

ml_label: default
gpu_num: 1
reprocess: false
